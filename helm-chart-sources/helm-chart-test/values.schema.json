{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "http://example.com/example.json",
    "type": "object",
    "title": "Durgesh Test Example JSON schema",
    "required": [
        "license",
        "image",
        "service",
        "secret",
        "serviceAccount"
    ],
    "properties": {
        "license": {
            "$id": "#/properties/license",
            "type": "boolean",
            "title": "License acceptance",
            "description": "Please accept license after reading it at https://github.com/durgeshsingh2065/helm-repo",
            "default": false
        },
        "licenseType": {
            "$id": "#/properties/licenseType",
            "type": "string",
            "title": "License edition for Example",
            "description": "Please provide the license type edition as either prod or non-prod for production or non-production respectively.",
            "default": "prod",
            "examples": [
                "prod",
                "non-prod"
            ]
        },
        "replicaCount": {
            "$id": "#/properties/replicaCount",
            "type": "integer",
            "title": "Replica Count",
            "description": "This configuration is not supported. The count will always remain 1",
            "default": 1
        },
        "arch": {
            "$id": "#/properties/arch",
            "type": "string",
            "title": "Worker Node Architecture",
            "description": "Specify the worker node architecture where deployment would be done. The helm chart will try to detect the architecture based on the master node",
            "default": "amd64",
            "examples": [
                "amd64"
            ]
        },
        "image": {
            "$id": "#/properties/image",
            "type": "object",
            "title": "Container Image Configuration",
            "default": {},
            "required": [
                "repository",
                "tag",
                "pullPolicy"
            ],
            "properties": {
                "repository": {
                    "$id": "#/properties/image/properties/repository",
                    "type": "string",
                    "title": "Image Repository",
                    "description": "Specify the container image registry with image name",
                    "default": "durgesh"
                },
                "tag": {
                    "$id": "#/properties/image/properties/tag",
                    "type": "string",
                    "title": "Image Tag",
                    "description": "Specify a valid image tag present on registry",
                    "default": "1.0",
                    "examples": [
                      "1.0",
                      "1.2",
                      "1.3"  
                    ]
                },
                "pullPolicy": {
                    "$id": "#/properties/image/properties/pullPolicy",
                    "type": "string",
                    "title": "Image Pull Policy",
                    "description": "Specify the image pull policy for containers",
                    "default": "IfNotPresent",
                    "examples": [
                        "IfNotPresent",
                        "Always",
                        "Never"
                    ]
                }
            }
        },
        "extraProps": {
            "$id": "#/properties/extraProps",
            "type": "array",
            "title": "Extra Props Name",
            "description": "EExtra props name for general purposes",
            "default": [],
            "items": {
                "$id": "#/properties/extraProps/items",
                "additionalProperties": true
            }
        },
        "storageSecurity": {
            "$id": "#/properties/storageSecurity",
            "type": "object",
            "title": "Storage Security",
            "properties": {
                "supplementalGroups": {
                    "$id": "#/properties/storageSecurity/properties/supplementalGroups",
                    "type": "array",
                    "title": "The supplementalGroups schema",
                    "description": "An explanation about the purpose of this instance.",
                    "items": {
                        "$id": "#/properties/storageSecurity/properties/supplementalGroups/items",
                        "type": "integer",
                        "additionalItems": true
                    }
                }
            }
        },
        "service": {
            "$id": "#/properties/service",
            "type": "object",
            "title": "Service Configuration",
            "required": [
                "type",
                "port"
            ],
            "properties": {
                "type": {
                    "$id": "#/properties/service/properties/type",
                    "type": "string",
                    "title": "Service Type",
                    "description": "Specify the service type to be used to expose the application",
                    "default": "LoadBalancer",
                    "examples": [
                        "LoadBalancer",
                        "NodePort",
                        "ClusterIP"
                    ]
                },
                "port": {
					"$id": "#/properties/service/properties/apiport/properties/port",
					"type": ["integer", "null"],
					"title": "API Port",
					"description": "Specify the port number.",
					"default": ""
                }
             }
        },
        "secret": {
            "$id": "#/properties/secret",
            "type": "object",
            "title": "Secret Configuration",
            "required": [
                "secretName"
            ],
            "properties": {
                "secretName": {
                    "$id": "#/properties/secret/properties/secretName",
                    "type": "string",
                    "title": "Secret",
                    "description": "Specify the secret name which is created as prerequisite for this deployment.",
                    "default": ""
                }
            },
            "additionalProperties": false
        },
        "serviceAccount": {
            "$id": "#/properties/serviceAccount",
            "type": "object",
            "title": "Service Account Configuration",
            "required": [
                "create"
            ],
            "properties": {
                "create": {
                    "$id": "#/properties/serviceAccount/properties/create",
                    "type": "boolean",
                    "title": "Service Account Create",
                    "description": "Specify true/false to create or not create a service account",
                    "default": true,
                    "examples": [
                        true,
                        false
                    ]
                },
                "name": {
                    "$id": "#/properties/serviceAccount/properties/name",
                    "type": "string",
                    "title": "Service Account Name",
                    "description": "Specify service account name if existing service account is to be use for this deployment.",
                    "default": ""
                }
            },
            "additionalProperties": false
        }        
    },
    "additionalProperties": true
}

